INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/src/ssmanip)
INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/src/ssmanip2)
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})

ADD_EXECUTABLE(stringify stringify.cpp)
GET_TARGET_PROPERTY(STRINGIFY_LOC stringify LOCATION)

ADD_CUSTOM_COMMAND(
  OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/csv2html_css.cpp 
  COMMAND ${STRINGIFY_LOC} ${CMAKE_CURRENT_SOURCE_DIR}/csv2html.css ${CMAKE_CURRENT_BINARY_DIR}/csv2html_css.cpp csv2html_css
  DEPENDS stringify ${CMAKE_CURRENT_SOURCE_DIR}/csv2html.css
)

ADD_LIBRARY(ssrender CsvRender.h CsvRender.cpp ${CMAKE_CURRENT_BINARY_DIR}/csv2html_css.cpp)

ADD_EXECUTABLE(csv2html csv2html.cpp)
TARGET_LINK_LIBRARIES(csv2html ssmanip2 ssrender)
INSTALL(TARGETS csv2html COMPONENT utilities DESTINATION bin)
