INCLUDE_DIRECTORIES(${SHEET_INCLUDE_DIRS})
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/include)

ADD_EXECUTABLE(stringify stringify.cpp)
GET_TARGET_PROPERTY(STRINGIFY_LOC stringify LOCATION)

ADD_CUSTOM_COMMAND(
  OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/csv2html_css.cpp 
  COMMAND ${STRINGIFY_LOC} ${CMAKE_CURRENT_SOURCE_DIR}/csv2html.css ${CMAKE_CURRENT_BINARY_DIR}/csv2html_css.cpp csv2html_css
  DEPENDS stringify ${CMAKE_CURRENT_SOURCE_DIR}/csv2html.css
)

ADD_LIBRARY(coopy_render include/coopy/CsvRender.h CsvRender.cpp ${CMAKE_CURRENT_BINARY_DIR}/csv2html_css.cpp)

IF (COMPILE_PLAIN_EXECUTABLES)
  ADD_EXECUTABLE(csv2html csv2html.cpp)
  TARGET_LINK_LIBRARIES(csv2html sheet coopy_render)
  INSTALL(TARGETS csv2html COMPONENT ${CSVBIN} DESTINATION bin)
ENDIF ()

ADD_EXECUTABLE(ss2html csv2html.cpp)
TARGET_LINK_LIBRARIES(ss2html coopy_full coopy_render)

INSTALL(TARGETS ss2html COMPONENT ${BIGBIN} DESTINATION bin)
